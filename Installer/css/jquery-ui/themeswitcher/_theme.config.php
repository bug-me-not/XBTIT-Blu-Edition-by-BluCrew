<?php 
   $themes = array("ffDefault"=>"Verdana,Arial,sans-serif",
   "fwDefault"=>"normal",
   "fsDefault"=>"1.23em",
   "cornerRadius"=>"4.1px",
   "bgColorHeader"=>"ccc345",
   "bgTextureHeader"=>"01_flat.png",
   "bgImgOpacityHeader"=>"75.2",
   "borderColorHeader"=>"a11212",
   "fcHeader"=>"406ac4",
   "iconColorHeader"=>"915f5f",
   "bgColorContent"=>"cde797",
   "bgTextureContent"=>"07bdiagonals_medium.png",
   "bgImgOpacityContent"=>"72.9",
   "borderColorContent"=>"c643d0",
   "fcContent"=>"5faace",
   "iconColorContent"=>"789f2d",
   "bgColorDefault"=>"1d0606",
   "bgTextureDefault"=>"02_glass.png",
   "bgImgOpacityDefault"=>"74.4",
   "borderColorDefault"=>"d3d3d3",
   "fcDefault"=>"691111",
   "iconColorDefault"=>"a82cb5",
   "bgColorHover"=>"7d1eb3",
   "bgTextureHover"=>"08_diagonals_thick.png",
   "bgImgOpacityHover"=>"77.11",
   "borderColorHover"=>"df2a8d",
   "fcHover"=>"ee81a6",
   "iconColorHover"=>"d6b3c4",
   "bgColorActive"=>"f9c3f9",
   "bgTextureActive"=>"14_loop.png",
   "bgImgOpacityActive"=>"66.4",
   "borderColorActive"=>"e76e6e",
   "fcActive"=>"df4949",
   "iconColorActive"=>"7e1616",
   "bgColorHighlight"=>"14120b",
   "bgTextureHighlight"=>"19_layered_circles.png",
   "bgImgOpacityHighlight"=>"52.9",
   "borderColorHighlight"=>"fcefa1",
   "fcHighlight"=>"ca869e",
   "iconColorHighlight"=>"2e83ff",
   "bgColorError"=>"f7c0ab",
   "bgTextureError"=>"20_3D_boxes.png",
   "bgImgOpacityError"=>"95.7",
   "borderColorError"=>"f4b4b4",
   "fcError"=>"d4b0b0",
   "iconColorError"=>"683131",
   "bgColorOverlay"=>"e8b0b0",
   "bgTextureOverlay"=>"22_spotlight.png",
   "bgImgOpacityOverlay"=>"21.8",
   "opacityOverlay"=>"10.2",
   "bgColorShadow"=>"c25151",
   "bgTextureShadow"=>"23_fine_grain.png",
   "bgImgOpacityShadow"=>"5.3",
   "opacityShadow"=>"30.7",
   "thicknessShadow"=>"8.2px",
   "offsetTopShadow"=>"-8.6px",
   "offsetLeftShadow"=>"-8.5px",
   "cornerRadiusShadow"=>"8.3px"
);
$themesextend = array(
   "bgColorLayout"=>"faf8f0",
   "bgTextureLayout"=>"01_flat.png",
   "bgImgOpacityLayout"=>"55",
   "borderColorLayout"=>"f8e8f6",
   "iconColorLayout"=>"2e83ff",
   "fcLayout"=>"363636",   
   "lcLayout"=>"",
   "bgColorToolbar"=>"faf8f0",
   "bgTextureToolbar"=>"01_flat.png",
   "bgImgOpacityToolbar"=>"55",
   "borderColorToolbar"=>"f8e8f6",
   "iconColorToolbar"=>"2e83ff",
   "fcToolbar"=>"363636",   
   "lcToolbar"=>"",   
   "bgColorLight"=>"faf8f0",
   "bgTextureLight"=>"01_flat.png",
   "bgImgOpacityLight"=>"55",
   "borderColorLight"=>"f8e8f6",
   "iconColorLight"=>"2e83ff",
   "fcLight"=>"363636",
   "lcLight"=>"",
   "lcHeader"=>"",
   "lcContent"=>"",
   "lcHighlight"=>"",
   "lcError"=>"",
);

$themesdefault = array(
   "ffDefault"=>"Verdana,Arial,sans-serif",
   "fwDefault"=>"normal",
   "fsDefault"=>"1.2em",
   "cornerRadius"=>"4px",
   "bgColorHeader"=>"cccccc",
   "bgTextureHeader"=>"03_highlight_soft.png",
   "bgImgOpacityHeader"=>"75",
   "borderColorHeader"=>"aaaaaa",
   "fcHeader"=>"222222",
   "iconColorHeader"=>"222222",
   "bgColorContent"=>"ffffff",
   "bgTextureContent"=>"01_flat.png",
   "bgImgOpacityContent"=>"75",
   "borderColorContent"=>"aaaaaa",
   "fcContent"=>"222222",
   "iconColorContent"=>"222222",
   "bgColorDefault"=>"e6e6e6",
   "bgTextureDefault"=>"02_glass.png",
   "bgImgOpacityDefault"=>"75",
   "borderColorDefault"=>"d3d3d3",
   "fcDefault"=>"555555",
   "iconColorDefault"=>"888888",
   "bgColorHover"=>"dadada",
   "bgTextureHover"=>"02_glass.png",
   "bgImgOpacityHover"=>"75",
   "borderColorHover"=>"999999",
   "fcHover"=>"212121",
   "iconColorHover"=>"454545",
   "bgColorActive"=>"ffffff",
   "bgTextureActive"=>"02_glass.png",
   "bgImgOpacityActive"=>"65",
   "borderColorActive"=>"aaaaaa",
   "fcActive"=>"212121",
   "iconColorActive"=>"454545",
   "bgColorHighlight"=>"fbf9ee",
   "bgTextureHighlight"=>"02_glass.png",
   "bgImgOpacityHighlight"=>"55",
   "borderColorHighlight"=>"fcefa1",
   "fcHighlight"=>"363636",
   "iconColorHighlight"=>"2e83ff",
   "bgColorError"=>"fef1ec",
   "bgTextureError"=>"02_glass.png",
   "bgImgOpacityError"=>"95",
   "borderColorError"=>"cd0a0a",
   "fcError"=>"cd0a0a",
   "iconColorError"=>"cd0a0a",
   "bgColorOverlay"=>"aaaaaa",
   "bgTextureOverlay"=>"01_flat.png",
   "bgImgOpacityOverlay"=>"0",
   "opacityOverlay"=>"30",
   "bgColorShadow"=>"aaaaaa",
   "bgTextureShadow"=>"01_flat.png",
   "bgImgOpacityShadow"=>"0",
   "opacityShadow"=>"30",
   "thicknessShadow"=>"8px",
   "offsetTopShadow"=>"-8px",
   "offsetLeftShadow"=>"-8px",
   "cornerRadiusShadow"=>"8px"
);
//position=>left center right,top middle bottom
//repeat => 
$textures = array(
   array("position"=>"center center","repeat"=>"repeat","value"=>"01_flat.png","width"=>"40","height"=>"100","name"=>"flat"),
   array("position"=>"center center","repeat"=>"repeat-x","value"=>"02_glass.png","width"=>"1","height"=>"400","name"=>"glass"),
   array("position"=>"center top","repeat"=>"repeat-x","value"=>"03_highlight_soft.png","width"=>"1","height"=>"100","name"=>"highlight soft"),
   array("position"=>"center bottom","repeat"=>"repeat-x","value"=>"04_highlight_hard.png","width"=>"1","height"=>"100","name"=>"highlight hard"),
   array("position"=>"center bottom","repeat"=>"repeat-x","value"=>"05_inset_soft.png","width"=>"1","height"=>"100","name"=>"inset soft"),
   array("position"=>"center top","repeat"=>"repeat-x","value"=>"06_inset_hard.png","width"=>"1","height"=>"100","name"=>"inset hard"),
   array("position"=>"center center","repeat"=>"repeat","value"=>"07_diagonals_small.png","width"=>"40","height"=>"40","name"=>"diagonals small"),
   array("position"=>"center center","repeat"=>"repeat","value"=>"07bdiagonals_medium.png","width"=>"40","height"=>"40","name"=>"medium.png"),
   array("position"=>"center center","repeat"=>"repeat","value"=>"08_diagonals_thick.png","width"=>"40","height"=>"40","name"=>"diagonals thick"),
   array("position"=>"center center","repeat"=>"repeat","value"=>"09_dots_small.png","width"=>"2","height"=>"2","name"=>"dots small"),
   array("position"=>"center center","repeat"=>"repeat","value"=>"10_dots_medium.png","width"=>"4","height"=>"4","name"=>"dots medium"),
   array("position"=>"center center","repeat"=>"repeat","value"=>"11_white_lines.png","width"=>"40","height"=>"100","name"=>"white lines"),
   array("position"=>"center top","repeat"=>"repeat-x","value"=>"12_gloss_wave.png","width"=>"500","height"=>"100","name"=>"gloss wave"),
   array("position"=>"center center","repeat"=>"repeat","value"=>"13_diamond.png","width"=>"10","height"=>"8","name"=>"diamond"),
   array("position"=>"center center","repeat"=>"repeat","value"=>"14_loop.png","width"=>"21","height"=>"21","name"=>"loop"),
   array("position"=>"center center","repeat"=>"repeat","value"=>"15_carbon_fiber.png","width"=>"8","height"=>"9","name"=>"carbon fiber"),
   array("position"=>"center center","repeat"=>"repeat","value"=>"16_diagonal_maze.png","width"=>"10","height"=>"10","name"=>"diagonal maze"),
   array("position"=>"center center","repeat"=>"repeat","value"=>"17_diamond_ripple.png","width"=>"22","height"=>"22","name"=>"diamond ripple"),
   array("position"=>"center center","repeat"=>"repeat","value"=>"18_hexagon.png","width"=>"12","height"=>"10","name"=>"hexagon"),
   array("position"=>"center center","repeat"=>"repeat","value"=>"19_layered_circles.png","width"=>"13","height"=>"13","name"=>"layered circles"),
   array("position"=>"center center","repeat"=>"repeat","value"=>"20_3D_boxes.png","width"=>"12","height"=>"10","name"=>"3D boxes"),
   array("position"=>"center center","repeat"=>"repeat","value"=>"21_glow_ball.png","width"=>"16","height"=>"16","name"=>"glow ball"),
   array("position"=>"center center","repeat"=>"repeat","value"=>"22_spotlight.png","width"=>"16","height"=>"16","name"=>"spotlight"),
   array("position"=>"center center","repeat"=>"repeat","value"=>"23_fine_grain.png","width"=>"60","height"=>"60","name"=>"fine grain")
);
$themes = array_merge($themesdefault,$_GET,array("fsDefault"=>"1.2em","fwDefault"=>"normal"));
//$themesextend,
$lc = array('Header','Content','Highlight','Error');
foreach($lc as $val){
   if(!isset($themes["lc".$val])&&isset($themes["fc".$val]))  { 
      $themes["lc".$val] = $themes["fc".$val];
   }
}
$group = array('bgColor','bgTexture','bgImgOpacity','borderColor','iconColor','fc','lc');
foreach($group as $val){
   if(!isset($themes[$val."Layout"])&&isset($themes[$val."Content"]))   
   $themes[$val."Layout"] = $themes[$val."Content"];
   if(!isset($themes[$val."Toolbar"])&&isset($themes[$val."Header"]))   
   $themes[$val."Toolbar"] = $themes[$val."Header"];
   if(!isset($themes[$val."Light"])&&isset($themes[$val."Highlight"]))   
   $themes[$val."Light"] = $themes[$val."Highlight"];
   if(!isset($themes[$val."Input"])&&isset($themes[$val."Default"]))   
   $themes[$val."Input"] = $themes[$val."Default"];
}
$textures_hash = array();
foreach($textures as $value){
   $textures_hash[$value['value']] = $value;

}
$icons = array("value"=>"icons.png","width"=>"256","height"=>"240");
function icon_src($color){
   global $icons;
   $markup = "images/?new=".$color."&w=".$icons['width']."&h=".$icons['height']."&f=png&fltr[]=rcd|256&fltr[]=mask|icons/".$icons['value'];
   return $markup;
}

function texture_src($color,$image,$opacity='opactiy'){
   $markup = "images/?new=".$color."&w=".$image["width"]."&h=".$image["height"]."&f=png&q=100&fltr[]=over|textures/".$image["value"]."|0|0|".$opacity;
   return $markup;

}
function get_src($color,$name='name',$opacity='opactiy'){
   global $textures_hash;
   global $themes;
   if(strstr($color,'icon')){
      $color = $themes[$color];
      return icon_src($color);
   }else{
      $color = $themes[$color];
      $oldname = $name;
      $name = $themes[$name];
      $opacity = $themes[$opacity];
      $name = explode('/',$name);
      $name = $name[count($name)-1];
      $image = $textures_hash[$name];
      $src = texture_src($color,$image,$opacity);
      return $src;
   }
}
function get_name($color,$name='name',$opacity='opactiy'){
	//ui-bg_glass_55_fbf9ee_1x400  ui-bg_name_opacity_color_widthxheight.png
	//ui-icons_222222_256x240.png
   global $textures_hash;
   global $themes;
   if(strstr($color,'icon')){
      $color = $themes[$color];
      return "ui-icons_".$color."_256x240.png";
   }else{
      $color = $themes[$color];
      $oldname = $name;
      $name = $themes[$name];
      $opacity = $themes[$opacity];
      $name = explode('/',$name);
      $name = $name[count($name)-1];
      $image = $textures_hash[$name];
      $n = str_replace('.png','',$image["value"]);
      $n = explode('_',$n);
      array_shift($n);
      $n = join('_',$n);
      return "ui-bg_".$n."_".$opacity."_".$color."_".$image["width"]."x".$image["height"].".png";
   }
}
function texture_bg($color,$name='name',$opacity='opactiy'){
   global $textures_hash;
   global $themes;
   global $download;
   if(isset($download)){
   	  $image_name = "images/".get_name($color,$name,$opacity);
   }
   if(strstr($color,'icon')){
      $color = $themes[$color];
      if(isset($download)){
   	  $src = $image_name;
      }else{
      $src = icon_src($color);
      }
      return "background-image: url(".$src.");";
   }else{
      $color = $themes[$color];
      $oldname = $name;
      $name = $themes[$name];
      $opacity = $themes[$opacity];
      $name = explode('/',$name);
      $name = $name[count($name)-1];
      $image = $textures_hash[$name];
      if(isset($download)){
   	  $src = $image_name;
      }else{
      $src = texture_src($color,$image,$opacity);
      }
      $position = $image['position'];
      if(strstr($oldname,'Header')){
         $position = 'center center';
      }
      return "background:#".$color." url(".$src.") ".$position." ".$image['repeat'].";";
   }
}
function texture_select($name,$selected=''){
   global $textures;
   $markup ="<select name=\"".$name."\" class=\"texture\">"; 
      foreach($textures as $value){
         $markup.="<option value=\"".$value['value']."\" ";
         if($selected==$value['value'])
         $markup.="selected=\"selected\" ";
         $markup.="data-texturewidth=\"".$value['width']."\" data-textureheight=\"".$value['height']."\">".$value['name']."</option>";
      }
      $markup = $markup."</select>";
   return $markup;

}
/*
$href = 'ffDefault=Verdana,Arial,sans-serif&fwDefault=normal&fsDefault=1.23em&cornerRadius=4.1px&bgColorHeader=ccc345&bgTextureHeader=01_flat.png&bgImgOpacityHeader=75.2&borderColorHeader=a11212&fcHeader=406ac4&iconColorHeader=915f5f&bgColorContent=cde797&bgTextureContent=07bdiagonals_medium.png&bgImgOpacityContent=72.9&borderColorContent=c643d0&fcContent=5faace&iconColorContent=789f2d&bgColorDefault=1d0606&bgTextureDefault=02_glass.png&bgImgOpacityDefault=74.4&borderColorDefault=d3d3d3&fcDefault=691111&iconColorDefault=a82cb5&bgColorHover=7d1eb3&bgTextureHover=08_diagonals_thick.png&bgImgOpacityHover=77.11&borderColorHover=df2a8d&fcHover=ee81a6&iconColorHover=d6b3c4&bgColorActive=f9c3f9&bgTextureActive=14_loop.png&bgImgOpacityActive=66.4&borderColorActive=e76e6e&fcActive=df4949&iconColorActive=7e1616&bgColorHighlight=14120b&bgTextureHighlight=19_layered_circles.png&bgImgOpacityHighlight=52.9&borderColorHighlight=fcefa1&fcHighlight=ca869e&iconColorHighlight=2e83ff&bgColorError=f7c0ab&bgTextureError=20_3D_boxes.png&bgImgOpacityError=95.7&borderColorError=f4b4b4&fcError=d4b0b0&iconColorError=683131&bgColorOverlay=e8b0b0&bgTextureOverlay=22_spotlight.png&bgImgOpacityOverlay=21.8&opacityOverlay=10.2&bgColorShadow=c25151&bgTextureShadow=23_fine_grain.png&bgImgOpacityShadow=5.3&opacityShadow=30.7&thicknessShadow=8.2px&offsetTopShadow=-8.6px&offsetLeftShadow=-8.5px&cornerRadiusShadow=8.3px';
$t = explode('&',$href);
$s = $href;
$s = str_replace('&',"\",\n\"",$s);
$s = str_replace('=','"=>"',$s);
echo $s;
*/
/*http://jqueryui.com/themeroller/_rollyourown.php?ffDefault=Trebuchet+MS,+Tahoma,+Verdana,+Arial,+sans-serif&fwDefault=bold&fsDefault=1.1em&cornerRadius=4px&bgColorHeader=f6a828&bgTextureHeader=12_gloss_wave.png&bgImgOpacityHeader=35&borderColorHeader=e78f08&fcHeader=ffffff&iconColorHeader=ffffff&bgColorContent=eeeeee&bgTextureContent=03_highlight_soft.png&bgImgOpacityContent=100&borderColorContent=dddddd&fcContent=333333&iconColorContent=222222&bgColorDefault=f6f6f6&bgTextureDefault=02_glass.png&bgImgOpacityDefault=100&borderColorDefault=cccccc&fcDefault=1c94c4&iconColorDefault=ef8c08&bgColorHover=fdf5ce&bgTextureHover=02_glass.png&bgImgOpacityHover=100&borderColorHover=fbcb09&fcHover=c77405&iconColorHover=ef8c08&bgColorActive=ffffff&bgTextureActive=02_glass.png&bgImgOpacityActive=65&borderColorActive=fbd850&fcActive=eb8f00&iconColorActive=ef8c08&bgColorHighlight=ffe45c&bgTextureHighlight=03_highlight_soft.png&bgImgOpacityHighlight=75&borderColorHighlight=fed22f&fcHighlight=363636&iconColorHighlight=228ef1&bgColorError=b81900&bgTextureError=08_diagonals_thick.png&bgImgOpacityError=18&borderColorError=cd0a0a&fcError=ffffff&iconColorError=ffd27a&bgColorOverlay=666666&bgTextureOverlay=08_diagonals_thick.png&bgImgOpacityOverlay=20&opacityOverlay=50&bgColorShadow=000000&bgTextureShadow=01_flat.png&bgImgOpacityShadow=10&opacityShadow=20&thicknessShadow=5px&offsetTopShadow=-5px&offsetLeftShadow=-5px&cornerRadiusShadow=5px


$str = $texture_options;
$str = preg_replace('/<option(.*?)value="([^"]*)"(.*?)data\-texturewidth="([^"]*)"(.*?)data\-textureheight="([^"]*)"(.*?)>(.*?)<\/option>/i',"array(\"value\"=>\"$2\",\"width\"=>\"$4\",\"height\"=>\"$6\",\"name\"=>\"$8\"),\n",$str);

echo $str;
*/

?>
